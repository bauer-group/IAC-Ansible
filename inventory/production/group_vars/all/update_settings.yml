---
# =============================================================================
# Auto-Update Settings (centrally managed)
# =============================================================================
# These settings are applied to all hosts in the 'auto_update' group.
# Override per-host in host_vars/<hostname>.yml

# Enable/disable automatic updates
auto_update_enabled: true

# Update type: "all" = all packages, "security" = security updates only
auto_update_type: "all"

# --- Maintenance Chain ---
# Single cron triggers sequential chain: ansible-pull → update → reboot
# Set to false to skip ansible-pull phase in the chain
auto_update_chain_ansible_pull: true

# --- Schedule (cron format) ---
# Single trigger for the entire maintenance chain
# Default: Daily at 02:00 AM
auto_update_cron_minute: "0"
auto_update_cron_hour: "2"
auto_update_cron_day: "*"
auto_update_cron_month: "*"
auto_update_cron_weekday: "*"

# --- Reboot Settings ---
# Reboot runs at the END of the maintenance chain (not a separate cron)
# Only on the configured weekday (0 = Sunday)
auto_update_reboot_enabled: true
auto_update_reboot_cron_weekday: "0"

# Packages to exclude from updates (blacklist)
auto_update_blacklist: []
# Example:
# auto_update_blacklist:
#   - docker-ce
#   - kubelet

# Email notifications
auto_update_mail_to: ""
auto_update_mail_on_error: true

# Cleanup old kernels
auto_update_remove_old_kernels: true

# Auto-remove unused dependencies
auto_update_autoremove: true

# --- Status Monitor Integration ---
# Modular integration for status monitoring (Uptime Kuma, etc.)
# Opens maintenance window before updates, closes after completion/reboot.
# Monitors are discovered automatically by server FQDN hostname.
# Only activates when updates are actually available.
auto_update_statusmon_enabled: false
auto_update_statusmon_provider: "uptime-kuma"
#
# Credentials: stored in /etc/iac-ansible/status-monitor.env (NOT in git)
# Option A: Deploy .env via Ansible Vault (set all vars below)
# Option B: Create /etc/iac-ansible/status-monitor.env manually on each host
#
# Note: Uptime Kuma uses username/password via Socket.IO API.
#
# auto_update_statusmon_url: "https://status.bauer-group.com"
# auto_update_statusmon_username: "iac-ansible"
# auto_update_statusmon_password: "{{ vault_statusmon_password }}"
#
# Vault example:
#   ansible-vault encrypt_string 'your-password' --name 'vault_statusmon_password'
auto_update_statusmon_url: ""
auto_update_statusmon_username: ""
auto_update_statusmon_password: ""
