---
# =============================================================================
# Auto-Update Role Defaults
# =============================================================================
# All values can be overridden in:
#   - inventory/production/group_vars/all/update_settings.yml (global)
#   - inventory/production/host_vars/<hostname>.yml (per-host)
# =============================================================================

# Master switch
auto_update_enabled: true

# Update type: "all" or "security"
auto_update_type: "all"

# --- Maintenance Chain ---
# The maintenance chain runs sequentially: ansible-pull → update → reboot
# Set to false to skip the ansible-pull phase (e.g., if running standalone)
# Note: When enabled, consider setting ansible_pull_enabled=false in the
# ansible_pull role to disable its standalone timer (avoids duplicate runs).
auto_update_chain_ansible_pull: true

# --- Schedule (cron) ---
# Single cron trigger for the entire maintenance chain
auto_update_cron_minute: "0"
auto_update_cron_hour: "2"
auto_update_cron_day: "*"
auto_update_cron_month: "*"
auto_update_cron_weekday: "*"

# --- Reboot Settings ---
# Reboot runs at the END of the maintenance chain (no separate cron)
# Only the weekday controls when reboots are allowed
auto_update_reboot_enabled: true
auto_update_reboot_cron_weekday: "0"

# --- Package Management ---
auto_update_blacklist: []
auto_update_autoremove: true
auto_update_remove_old_kernels: true

# --- Notifications ---
auto_update_mail_to: ""
auto_update_mail_on_error: true

# --- Status Monitor Integration ---
# Modular integration for status monitoring tools (Uptime Kuma, etc.)
# Opens maintenance window before updates, closes after completion/reboot.
# Monitors are discovered automatically by FQDN hostname.
#
# Credentials are stored in /etc/iac-ansible/status-monitor.env (NOT in git).
# Deploy via Ansible Vault vars below, or create the .env file manually.
auto_update_statusmon_enabled: false
# Provider: "uptime-kuma" (add new providers in files/providers/)
auto_update_statusmon_provider: "uptime-kuma"
# Optional: set these to deploy .env via Ansible (use vault for api_key!)
# If empty, the .env file must be created manually on each host.
auto_update_statusmon_url: ""
auto_update_statusmon_api_key: ""

# --- Logging ---
auto_update_log_file: "/var/log/auto-update.log"
